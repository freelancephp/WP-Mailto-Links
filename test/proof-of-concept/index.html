<!DOCTYPE html>
<html>
<head>
<title>Proof of Concept</title>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
<link rel='stylesheet' id='dashicons-css'  href='http://localhost/wp/wp-latest/wp-includes/css/dashicons.css?ver=4.3.1' type='text/css' media='all'>
<script type='text/javascript' src='http://localhost/wp/wp-latest/wp-includes/js/jquery/jquery.js?ver=1.11.3'></script>
<script>
jQuery(function ($) {

    var $resultFA = $('.ajax-result-fa');
    $resultFA.hide()
        .load('fontawesome.html', null, function (data) {
            readFAIcons();
        });

    var $resultDash = $('.ajax-result-dash');
    $resultDash.hide()
        .load('dashicons.html', null, function (data) {
            readDashIcons();
        });

    var JsonMaker = function (containerName, titleNames)
    {
        var obj = {};
        obj[containerName] = [];

        this.addItem = function () {
            var item = {};

            for (var index in arguments) {
                var title = titleNames[index];
                item[title] = arguments[index];
            }

            obj[containerName].push(item);
        }

        this.toString = function () {
            return JSON.stringify(obj);
        }
    };

    function readFAIcons()
    {
        var $select = $('.select-fa-icon');
        var json = new JsonMaker('icons', ['unicode', 'className']);

        $resultFA.find('i.fa').each(function () {
            $parent = $(this).parent();

            // unicode
            var text = $(this).text();

            // class
            $parent.children().remove();
            var value = $parent.text();

            $('<option value="'+ value +'">&#x'+ text +'</option>')
                .appendTo($select)
            ;

            json.addItem($.trim(text), $.trim(value));
        });

        $('.output-fa').html(json.toString());
    }


    function readDashIcons()
    {
        var $select = $('.select-dash-icon');
        var json = new JsonMaker('icons', ['unicode', 'className']);

        $resultDash.find('div.dashicons').each(function () {
            // unicode
            var text = $(this).attr('alt');

            // class
            $(this).removeClass('dashicons');
            var value = $(this).attr('class');

            $('<option value="'+ value +'">&#x'+ text +'</option>')
                .appendTo($select)
            ;

            json.addItem($.trim(text), $.trim(value));
        });

        $('.output-dash').html(json.toString());
    }

});
</script>
</head>
<body>
    <h2>Font Awesome Font</h2>
    <textarea class="output-fa" style="width:50%; height:200px;">
    </textarea>
    <div class="ajax-result-fa"></div>
    <p>
        <select class="select-fa-icon" style="font-family: 'FontAwesome'; font-size:1.5em; padding:0.5em;">
        </select>
    </p>

    <h2>Dashicons Font</h2>
    <textarea class="output-dash" style="width:50%; height:200px;">
    </textarea>
    <div class="ajax-result-dash"></div>
    <p>
        <select class="select-dash-icon" style="font-family: 'dashicons'; font-size:1.5em; padding:0.5em;">
        </select>
    </p>

    <h2>Tests</h2>
    <p>My post <a href="mailto:test@test.nl" class=""><i class="fa fa-fort-awesome"></i> email</a> content goes here.</p>
    <p>My post <a href="mailto:test@test.nl" class=""><i class="dashicons-before dashicons-testimonial"></i> email</a> content goes here.</p>
</body>
</html>
